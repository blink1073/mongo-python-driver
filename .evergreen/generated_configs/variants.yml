buildvariants:
  # Alternative hosts tests
  - name: openssl-1.0.2-rhel7-python3.9
    tasks:
      - name: .5.0 .standalone !.sync_async
    display_name: OpenSSL 1.0.2 RHEL7 Python3.9
    run_on:
      - rhel79-small
    batchtime: 10080
    expansions:
      PYTHON_BINARY: /opt/python/3.9/bin/python3
  - name: other-hosts-rhel9-fips
    tasks:
      - name: .6.0 .standalone !.sync_async
    display_name: Other hosts RHEL9-FIPS
    run_on:
      - rhel92-fips
    batchtime: 10080
    expansions:
      NO_EXT: "1"
  - name: other-hosts-rhel8-zseries
    tasks:
      - name: .6.0 .standalone !.sync_async
    display_name: Other hosts RHEL8-zseries
    run_on:
      - rhel8-zseries-small
    batchtime: 10080
    expansions:
      NO_EXT: "1"
  - name: other-hosts-rhel8-power8
    tasks:
      - name: .6.0 .standalone !.sync_async
    display_name: Other hosts RHEL8-POWER8
    run_on:
      - rhel8-power-small
    batchtime: 10080
    expansions:
      NO_EXT: "1"
  - name: other-hosts-rhel8-arm64
    tasks:
      - name: .6.0 .standalone !.sync_async
    display_name: Other hosts RHEL8-arm64
    run_on:
      - rhel82-arm64-small
    batchtime: 10080
    expansions:
      NO_EXT: "1"

  # Atlas connect tests
  - name: atlas-connect-amazon2023-python3.9
    tasks:
      - name: .atlas_connect
    display_name: Atlas connect Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: atlas-connect-amazon2023-python3.13
    tasks:
      - name: .atlas_connect
    display_name: Atlas connect Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Atlas data lake tests
  - name: atlas-data-lake-ubuntu-22-python3.9
    tasks:
      - name: .atlas_data_lake
    display_name: Atlas Data Lake Ubuntu-22 Python3.9
    run_on:
      - ubuntu2204-small
    expansions:
      PYTHON_BINARY: /opt/python/3.9/bin/python3
  - name: atlas-data-lake-ubuntu-22-python3.13
    tasks:
      - name: .atlas_data_lake
    display_name: Atlas Data Lake Ubuntu-22 Python3.13
    run_on:
      - ubuntu2204-small
    expansions:
      PYTHON_BINARY: /opt/python/3.13/bin/python3

  # Aws auth tests
  - name: auth-aws-ubuntu-20-python3.9
    tasks:
      - name: .auth-aws
    display_name: Auth AWS Ubuntu-20 Python3.9
    run_on:
      - ubuntu2004-small
    expansions:
      PYTHON_BINARY: /opt/python/3.9/bin/python3
  - name: auth-aws-ubuntu-20-python3.13
    tasks:
      - name: .auth-aws
    display_name: Auth AWS Ubuntu-20 Python3.13
    run_on:
      - ubuntu2004-small
    expansions:
      PYTHON_BINARY: /opt/python/3.13/bin/python3
  - name: auth-aws-win64-python3.9
    tasks:
      - name: .auth-aws !.auth-aws-ecs
    display_name: Auth AWS Win64 Python3.9
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/Python39/python.exe
  - name: auth-aws-win64-python3.13
    tasks:
      - name: .auth-aws !.auth-aws-ecs
    display_name: Auth AWS Win64 Python3.13
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/Python313/python.exe
  - name: auth-aws-macos-python3.9
    tasks:
      - name: .auth-aws !.auth-aws-web-identity !.auth-aws-ecs !.auth-aws-ec2
    display_name: Auth AWS macOS Python3.9
    run_on:
      - macos-14
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
  - name: auth-aws-macos-python3.13
    tasks:
      - name: .auth-aws !.auth-aws-web-identity !.auth-aws-ecs !.auth-aws-ec2
    display_name: Auth AWS macOS Python3.13
    run_on:
      - macos-14
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.13/bin/python3

  # Aws lambda tests
  - name: faas-lambda
    tasks:
      - name: .aws_lambda
    display_name: FaaS Lambda
    run_on:
      - rhel87-small

  # Compression tests
  - name: compression-snappy-amazon2023-python3.9-no-c
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Compression snappy Amazon2023 Python3.9 No C
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: snappy
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-snappy-amazon2023-python3.10
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Compression snappy Amazon2023 Python3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: snappy
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-zlib-amazon2023-python3.11-no-c
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Compression zlib Amazon2023 Python3.11 No C
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: zlib
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-zlib-amazon2023-python3.12
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Compression zlib Amazon2023 Python3.12
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: zlib
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-zstd-amazon2023-python3.13-no-c
    tasks:
      - name: .standalone .noauth .nossl .sync_async !.4.0
    display_name: Compression zstd Amazon2023 Python3.13 No C
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: zstd
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-zstd-amazon2023-python3.9
    tasks:
      - name: .standalone .noauth .nossl .sync_async !.4.0
    display_name: Compression zstd Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: zstd
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-snappy-amazon2023-pypy3.10
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Compression snappy Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: snappy
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-zlib-amazon2023-pypy3.10
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Compression zlib Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: zlib
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: compression-zstd-amazon2023-pypy3.10
    tasks:
      - name: .standalone .noauth .nossl .sync_async !.4.0
    display_name: Compression zstd Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COMPRESSORS: zstd
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Disable test commands tests
  - name: disable-test-commands-amazon2023-python3.9
    tasks:
      - name: .latest .sync_async
    display_name: Disable test commands Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      AUTH: auth
      SSL: ssl
      DISABLE_TEST_COMMANDS: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Doctests tests
  - name: doctests-amazon2023-python3.9
    tasks:
      - name: .doctests
    display_name: Doctests Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Encryption tests
  - name: encryption-amazon2023-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-amazon2023-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-amazon2023-pypy3.10
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-crypt_shared-amazon2023-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption crypt_shared Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-crypt_shared-amazon2023-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption crypt_shared Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-crypt_shared-amazon2023-pypy3.10
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption crypt_shared Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-pyopenssl-amazon2023-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption PyOpenSSL Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      SUB_TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-pyopenssl-amazon2023-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption PyOpenSSL Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      SUB_TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-pyopenssl-amazon2023-pypy3.10
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption PyOpenSSL Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      SUB_TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [encryption_tag]
  - name: encryption-amazon2023-python3.10
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
    display_name: Encryption Amazon2023 Python3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: encryption-crypt_shared-amazon2023-python3.11
    tasks:
      - name: .replica_set .noauth .ssl .sync_async
    display_name: Encryption crypt_shared Amazon2023 Python3.11
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: encryption-pyopenssl-amazon2023-python3.12
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Encryption PyOpenSSL Amazon2023 Python3.12
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      TEST_NAME: encryption
      SUB_TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: encryption-macos-python3.9
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption macOS Python3.9
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
    tags: [encryption_tag]
  - name: encryption-macos-python3.13
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption macOS Python3.13
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.13/bin/python3
    tags: [encryption_tag]
  - name: encryption-crypt_shared-macos-python3.9
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption crypt_shared macOS Python3.9
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
    tags: [encryption_tag]
  - name: encryption-crypt_shared-macos-python3.13
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption crypt_shared macOS Python3.13
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.13/bin/python3
    tags: [encryption_tag]
  - name: encryption-win64-python3.9
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption Win64 Python3.9
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: C:/python/Python39/python.exe
    tags: [encryption_tag]
  - name: encryption-win64-python3.13
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption Win64 Python3.13
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      PYTHON_BINARY: C:/python/Python313/python.exe
    tags: [encryption_tag]
  - name: encryption-crypt_shared-win64-python3.9
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption crypt_shared Win64 Python3.9
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: C:/python/Python39/python.exe
    tags: [encryption_tag]
  - name: encryption-crypt_shared-win64-python3.13
    tasks:
      - name: .latest .replica_set .sync_async
    display_name: Encryption crypt_shared Win64 Python3.13
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      TEST_NAME: encryption
      TEST_CRYPT_SHARED: "true"
      PYTHON_BINARY: C:/python/Python313/python.exe
    tags: [encryption_tag]

  # Enterprise auth tests
  - name: auth-enterprise-macos-python3.9
    tasks:
      - name: .enterprise_auth
    display_name: Auth Enterprise macOS Python3.9
    run_on:
      - macos-14
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
  - name: auth-enterprise-amazon2023-python3.10
    tasks:
      - name: .enterprise_auth
    display_name: Auth Enterprise Amazon2023 Python3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: auth-enterprise-amazon2023-python3.11
    tasks:
      - name: .enterprise_auth
    display_name: Auth Enterprise Amazon2023 Python3.11
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: auth-enterprise-amazon2023-python3.12
    tasks:
      - name: .enterprise_auth
    display_name: Auth Enterprise Amazon2023 Python3.12
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: auth-enterprise-win64-python3.13
    tasks:
      - name: .enterprise_auth
    display_name: Auth Enterprise Win64 Python3.13
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/Python313/python.exe
  - name: auth-enterprise-amazon2023-pypy3.10
    tasks:
      - name: .enterprise_auth
    display_name: Auth Enterprise Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Free threaded tests
  - name: free-threaded-rhel8-python3.13t
    tasks:
      - name: .free-threading
    display_name: Free-threaded RHEL8 Python3.13t
    run_on:
      - rhel87-small
    expansions:
      PYTHON_BINARY: /opt/python/3.13t/bin/python3
  - name: free-threaded-macos-python3.13t
    tasks:
      - name: .free-threading
    display_name: Free-threaded macOS Python3.13t
    run_on:
      - macos-14
    expansions:
      PYTHON_BINARY: /Library/Frameworks/PythonT.Framework/Versions/3.13/bin/python3t
  - name: free-threaded-macos-arm64-python3.13t
    tasks:
      - name: .free-threading
    display_name: Free-threaded macOS Arm64 Python3.13t
    run_on:
      - macos-14-arm64
    expansions:
      PYTHON_BINARY: /Library/Frameworks/PythonT.Framework/Versions/3.13/bin/python3t

  # Green framework tests
  - name: green-eventlet-amazon2023-python3.9
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Green Eventlet Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      GREEN_FRAMEWORK: eventlet
      AUTH: auth
      SSL: ssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: green-gevent-amazon2023-python3.9
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Green Gevent Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      GREEN_FRAMEWORK: gevent
      AUTH: auth
      SSL: ssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: green-eventlet-amazon2023-python3.13
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Green Eventlet Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      GREEN_FRAMEWORK: eventlet
      AUTH: auth
      SSL: ssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: green-gevent-amazon2023-python3.13
    tasks:
      - name: .standalone .noauth .nossl .sync_async
    display_name: Green Gevent Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      GREEN_FRAMEWORK: gevent
      AUTH: auth
      SSL: ssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Load balancer tests
  - name: load-balancer-amazon2023-v6.0-python3.9
    tasks:
      - name: .load-balancer
    display_name: Load Balancer Amazon2023 v6.0 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      VERSION: "6.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: load-balancer-amazon2023-v7.0-python3.9
    tasks:
      - name: .load-balancer
    display_name: Load Balancer Amazon2023 v7.0 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      VERSION: "7.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: load-balancer-amazon2023-v8.0-python3.9
    tasks:
      - name: .load-balancer
    display_name: Load Balancer Amazon2023 v8.0 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      VERSION: "8.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: load-balancer-amazon2023-rapid-python3.9
    tasks:
      - name: .load-balancer
    display_name: Load Balancer Amazon2023 rapid Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      VERSION: rapid
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: load-balancer-amazon2023-latest-python3.9
    tasks:
      - name: .load-balancer
    display_name: Load Balancer Amazon2023 latest Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      VERSION: latest
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Mockupdb tests
  - name: mockupdb-amazon2023-python3.9
    tasks:
      - name: .mockupdb
    display_name: MockupDB Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Mod wsgi tests
  - name: mod_wsgi-ubuntu-22-python3.9
    tasks:
      - name: .mod_wsgi
    display_name: mod_wsgi Ubuntu-22 Python3.9
    run_on:
      - ubuntu2204-small
    expansions:
      MOD_WSGI_VERSION: "4"
      PYTHON_BINARY: /opt/python/3.9/bin/python3
  - name: mod_wsgi-ubuntu-22-python3.13
    tasks:
      - name: .mod_wsgi
    display_name: mod_wsgi Ubuntu-22 Python3.13
    run_on:
      - ubuntu2204-small
    expansions:
      MOD_WSGI_VERSION: "4"
      PYTHON_BINARY: /opt/python/3.13/bin/python3

  # No c ext tests
  - name: no-c-ext-amazon2023-python3.9
    tasks:
      - name: .standalone .noauth .nossl !.sync_async
    display_name: No C Ext Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: no-c-ext-amazon2023-python3.10
    tasks:
      - name: .replica_set .noauth .nossl !.sync_async
    display_name: No C Ext Amazon2023 Python3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: no-c-ext-amazon2023-python3.11
    tasks:
      - name: .sharded_cluster .noauth .nossl !.sync_async
    display_name: No C Ext Amazon2023 Python3.11
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: no-c-ext-amazon2023-python3.12
    tasks:
      - name: .standalone .noauth .nossl !.sync_async
    display_name: No C Ext Amazon2023 Python3.12
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: no-c-ext-amazon2023-python3.13
    tasks:
      - name: .replica_set .noauth .nossl !.sync_async
    display_name: No C Ext Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # No server tests
  - name: no-server
    tasks:
      - name: .no-server
    display_name: No server
    run_on:
      - rhel87-small

  # Ocsp tests
  - name: ocsp-amazon2023-v4.4-python3.9
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 v4.4 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "4.4"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-amazon2023-v5.0-python3.10
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 v5.0 Python3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "5.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-amazon2023-v6.0-python3.11
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 v6.0 Python3.11
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "6.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-amazon2023-v7.0-python3.12
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 v7.0 Python3.12
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "7.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-amazon2023-v8.0-python3.13
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 v8.0 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "8.0"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-amazon2023-rapid-pypy3.10
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 rapid PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: rapid
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-amazon2023-latest-python3.9
    tasks:
      - name: .ocsp
    display_name: OCSP Amazon2023 latest Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: latest
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: ocsp-win64-v4.4-python3.9
    tasks:
      - name: .ocsp-rsa !.ocsp-staple
    display_name: OCSP Win64 v4.4 Python3.9
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "4.4"
      PYTHON_BINARY: C:/python/Python39/python.exe
  - name: ocsp-win64-v8.0-python3.13
    tasks:
      - name: .ocsp-rsa !.ocsp-staple
    display_name: OCSP Win64 v8.0 Python3.13
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "8.0"
      PYTHON_BINARY: C:/python/Python313/python.exe
  - name: ocsp-macos-v4.4-python3.9
    tasks:
      - name: .ocsp-rsa !.ocsp-staple
    display_name: OCSP macOS v4.4 Python3.9
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "4.4"
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
  - name: ocsp-macos-v8.0-python3.13
    tasks:
      - name: .ocsp-rsa !.ocsp-staple
    display_name: OCSP macOS v8.0 Python3.13
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      AUTH: noauth
      SSL: ssl
      TOPOLOGY: server
      VERSION: "8.0"
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.13/bin/python3

  # Oidc auth tests
  - name: auth-oidc-ubuntu-22
    tasks:
      - name: .auth_oidc
    display_name: Auth OIDC Ubuntu-22
    run_on:
      - ubuntu2204-small
    batchtime: 10080
  - name: auth-oidc-macos
    tasks:
      - name: .auth_oidc !.auth_oidc_remote
    display_name: Auth OIDC macOS
    run_on:
      - macos-14
    batchtime: 10080
  - name: auth-oidc-win64
    tasks:
      - name: .auth_oidc !.auth_oidc_remote
    display_name: Auth OIDC Win64
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080

  # Perf tests
  - name: performance-benchmarks
    tasks:
      - name: .perf
    display_name: Performance Benchmarks
    run_on:
      - rhel90-dbx-perf-large
    batchtime: 10080

  # Pyopenssl tests
  - name: pyopenssl-macos-python3.9
    tasks:
      - name: .replica_set .noauth .nossl .sync_async
      - name: .7.0 .noauth .nossl .sync_async
    display_name: PyOpenSSL macOS Python3.9
    run_on:
      - macos-14
    batchtime: 10080
    expansions:
      TEST_NAME: pyopenssl
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
  - name: pyopenssl-amazon2023-python3.10
    tasks:
      - name: .replica_set .auth .ssl .sync_async
      - name: .7.0 .auth .ssl .sync_async
    display_name: PyOpenSSL Amazon2023 Python3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: pyopenssl-amazon2023-python3.11
    tasks:
      - name: .replica_set .auth .ssl .sync_async
      - name: .7.0 .auth .ssl .sync_async
    display_name: PyOpenSSL Amazon2023 Python3.11
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: pyopenssl-amazon2023-python3.12
    tasks:
      - name: .replica_set .auth .ssl .sync_async
      - name: .7.0 .auth .ssl .sync_async
    display_name: PyOpenSSL Amazon2023 Python3.12
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: pyopenssl-win64-python3.13
    tasks:
      - name: .replica_set .auth .ssl .sync_async
      - name: .7.0 .auth .ssl .sync_async
    display_name: PyOpenSSL Win64 Python3.13
    run_on:
      - windows-64-vsMulti-small
    batchtime: 10080
    expansions:
      TEST_NAME: pyopenssl
      PYTHON_BINARY: C:/python/Python313/python.exe
  - name: pyopenssl-amazon2023-pypy3.10
    tasks:
      - name: .replica_set .auth .ssl .sync_async
      - name: .7.0 .auth .ssl .sync_async
    display_name: PyOpenSSL Amazon2023 PyPy3.10
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      TEST_NAME: pyopenssl
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Search index tests
  - name: search-index-helpers-amazon2023-python3.9
    tasks:
      - name: .search_index
    display_name: Search Index Helpers Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Server tests
  - name: test-amazon2023-python3.9-cov-no-c
    tasks:
      - name: .standalone .sync_async
      - name: .replica_set .sync_async
      - name: .sharded_cluster .sync_async
    display_name: "* Test Amazon2023 Python3.9 cov No C"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [coverage_tag]
  - name: test-amazon2023-python3.9-cov
    tasks:
      - name: .standalone .sync_async
      - name: .replica_set .sync_async
      - name: .sharded_cluster .sync_async
    display_name: "* Test Amazon2023 Python3.9 cov"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [coverage_tag]
  - name: test-amazon2023-python3.13-cov-no-c
    tasks:
      - name: .standalone .sync_async
      - name: .replica_set .sync_async
      - name: .sharded_cluster .sync_async
    display_name: "* Test Amazon2023 Python3.13 cov No C"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [coverage_tag]
  - name: test-amazon2023-python3.13-cov
    tasks:
      - name: .standalone .sync_async
      - name: .replica_set .sync_async
      - name: .sharded_cluster .sync_async
    display_name: "* Test Amazon2023 Python3.13 cov"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [coverage_tag]
  - name: test-amazon2023-pypy3.10-cov-no-c
    tasks:
      - name: .standalone .sync_async
      - name: .replica_set .sync_async
      - name: .sharded_cluster .sync_async
    display_name: "* Test Amazon2023 PyPy3.10 cov No C"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      NO_EXT: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [coverage_tag]
  - name: test-amazon2023-pypy3.10-cov
    tasks:
      - name: .standalone .sync_async
      - name: .replica_set .sync_async
      - name: .sharded_cluster .sync_async
    display_name: "* Test Amazon2023 PyPy3.10 cov"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [coverage_tag]
  - name: test-amazon2023-python3.10
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: "* Test Amazon2023 Python3.10"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: test-amazon2023-python3.11
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: "* Test Amazon2023 Python3.11"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: test-amazon2023-python3.12
    tasks:
      - name: .sharded_cluster .auth .ssl .sync_async
      - name: .replica_set .noauth .ssl .sync_async
      - name: .standalone .noauth .nossl .sync_async
    display_name: "* Test Amazon2023 Python3.12"
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      COVERAGE: coverage
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: test-macos-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl !.sync_async
      - name: .replica_set .noauth .ssl !.sync_async
      - name: .standalone .noauth .nossl !.sync_async
    display_name: "* Test macOS Python3.9"
    run_on:
      - macos-14
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
  - name: test-macos-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl !.sync_async
      - name: .replica_set .noauth .ssl !.sync_async
      - name: .standalone .noauth .nossl !.sync_async
    display_name: "* Test macOS Python3.13"
    run_on:
      - macos-14
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.13/bin/python3
  - name: test-macos-arm64-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl .6.0 !.sync_async
      - name: .replica_set .noauth .ssl .6.0 !.sync_async
      - name: .standalone .noauth .nossl .6.0 !.sync_async
      - name: .sharded_cluster .auth .ssl .7.0 !.sync_async
      - name: .replica_set .noauth .ssl .7.0 !.sync_async
      - name: .standalone .noauth .nossl .7.0 !.sync_async
      - name: .sharded_cluster .auth .ssl .8.0 !.sync_async
      - name: .replica_set .noauth .ssl .8.0 !.sync_async
      - name: .standalone .noauth .nossl .8.0 !.sync_async
      - name: .sharded_cluster .auth .ssl .rapid !.sync_async
      - name: .replica_set .noauth .ssl .rapid !.sync_async
      - name: .standalone .noauth .nossl .rapid !.sync_async
      - name: .sharded_cluster .auth .ssl .latest !.sync_async
      - name: .replica_set .noauth .ssl .latest !.sync_async
      - name: .standalone .noauth .nossl .latest !.sync_async
    display_name: "* Test macOS Arm64 Python3.9"
    run_on:
      - macos-14-arm64
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.9/bin/python3
  - name: test-macos-arm64-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl .6.0 !.sync_async
      - name: .replica_set .noauth .ssl .6.0 !.sync_async
      - name: .standalone .noauth .nossl .6.0 !.sync_async
      - name: .sharded_cluster .auth .ssl .7.0 !.sync_async
      - name: .replica_set .noauth .ssl .7.0 !.sync_async
      - name: .standalone .noauth .nossl .7.0 !.sync_async
      - name: .sharded_cluster .auth .ssl .8.0 !.sync_async
      - name: .replica_set .noauth .ssl .8.0 !.sync_async
      - name: .standalone .noauth .nossl .8.0 !.sync_async
      - name: .sharded_cluster .auth .ssl .rapid !.sync_async
      - name: .replica_set .noauth .ssl .rapid !.sync_async
      - name: .standalone .noauth .nossl .rapid !.sync_async
      - name: .sharded_cluster .auth .ssl .latest !.sync_async
      - name: .replica_set .noauth .ssl .latest !.sync_async
      - name: .standalone .noauth .nossl .latest !.sync_async
    display_name: "* Test macOS Arm64 Python3.13"
    run_on:
      - macos-14-arm64
    expansions:
      PYTHON_BINARY: /Library/Frameworks/Python.Framework/Versions/3.13/bin/python3
  - name: test-win64-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl !.sync_async
      - name: .replica_set .noauth .ssl !.sync_async
      - name: .standalone .noauth .nossl !.sync_async
    display_name: "* Test Win64 Python3.9"
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/Python39/python.exe
  - name: test-win64-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl !.sync_async
      - name: .replica_set .noauth .ssl !.sync_async
      - name: .standalone .noauth .nossl !.sync_async
    display_name: "* Test Win64 Python3.13"
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/Python313/python.exe
  - name: test-win32-python3.9
    tasks:
      - name: .sharded_cluster .auth .ssl !.sync_async
      - name: .replica_set .noauth .ssl !.sync_async
      - name: .standalone .noauth .nossl !.sync_async
    display_name: "* Test Win32 Python3.9"
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/32/Python39/python.exe
  - name: test-win32-python3.13
    tasks:
      - name: .sharded_cluster .auth .ssl !.sync_async
      - name: .replica_set .noauth .ssl !.sync_async
      - name: .standalone .noauth .nossl !.sync_async
    display_name: "* Test Win32 Python3.13"
    run_on:
      - windows-64-vsMulti-small
    expansions:
      PYTHON_BINARY: C:/python/32/Python313/python.exe

  # Serverless tests
  - name: serverless-amazon2023-python3.9
    tasks:
      - name: .serverless
    display_name: Serverless Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: serverless-amazon2023-python3.13
    tasks:
      - name: .serverless
    display_name: Serverless Amazon2023 Python3.13
    run_on:
      - amazon2023-arm64-latest-large-m8g
    batchtime: 10080
    expansions:
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3

  # Stable api tests
  - name: stable-api-require-v1-amazon2023-python3.9-auth
    tasks:
      - name: .standalone .5.0 .noauth .nossl .sync_async
      - name: .standalone .6.0 .noauth .nossl .sync_async
      - name: .standalone .7.0 .noauth .nossl .sync_async
      - name: .standalone .8.0 .noauth .nossl .sync_async
      - name: .standalone .rapid .noauth .nossl .sync_async
      - name: .standalone .latest .noauth .nossl .sync_async
    display_name: Stable API require v1 Amazon2023 Python3.9 Auth
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      AUTH: auth
      REQUIRE_API_VERSION: "1"
      MONGODB_API_VERSION: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [versionedApi_tag]
  - name: stable-api-accept-v2-amazon2023-python3.9-auth
    tasks:
      - name: .standalone .5.0 .noauth .nossl .sync_async
      - name: .standalone .6.0 .noauth .nossl .sync_async
      - name: .standalone .7.0 .noauth .nossl .sync_async
      - name: .standalone .8.0 .noauth .nossl .sync_async
      - name: .standalone .rapid .noauth .nossl .sync_async
      - name: .standalone .latest .noauth .nossl .sync_async
    display_name: Stable API accept v2 Amazon2023 Python3.9 Auth
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      AUTH: auth
      ORCHESTRATION_FILE: versioned-api-testing.json
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [versionedApi_tag]
  - name: stable-api-require-v1-amazon2023-python3.13-auth
    tasks:
      - name: .standalone .5.0 .noauth .nossl .sync_async
      - name: .standalone .6.0 .noauth .nossl .sync_async
      - name: .standalone .7.0 .noauth .nossl .sync_async
      - name: .standalone .8.0 .noauth .nossl .sync_async
      - name: .standalone .rapid .noauth .nossl .sync_async
      - name: .standalone .latest .noauth .nossl .sync_async
    display_name: Stable API require v1 Amazon2023 Python3.13 Auth
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      AUTH: auth
      REQUIRE_API_VERSION: "1"
      MONGODB_API_VERSION: "1"
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [versionedApi_tag]
  - name: stable-api-accept-v2-amazon2023-python3.13-auth
    tasks:
      - name: .standalone .5.0 .noauth .nossl .sync_async
      - name: .standalone .6.0 .noauth .nossl .sync_async
      - name: .standalone .7.0 .noauth .nossl .sync_async
      - name: .standalone .8.0 .noauth .nossl .sync_async
      - name: .standalone .rapid .noauth .nossl .sync_async
      - name: .standalone .latest .noauth .nossl .sync_async
    display_name: Stable API accept v2 Amazon2023 Python3.13 Auth
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      AUTH: auth
      ORCHESTRATION_FILE: versioned-api-testing.json
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
    tags: [versionedApi_tag]

  # Storage engine tests
  - name: storage-inmemory-amazon2023-python3.9
    tasks:
      - name: .standalone .noauth .nossl .4.0 .sync_async
      - name: .standalone .noauth .nossl .4.2 .sync_async
      - name: .standalone .noauth .nossl .4.4 .sync_async
      - name: .standalone .noauth .nossl .5.0 .sync_async
      - name: .standalone .noauth .nossl .6.0 .sync_async
      - name: .standalone .noauth .nossl .7.0 .sync_async
      - name: .standalone .noauth .nossl .8.0 .sync_async
      - name: .standalone .noauth .nossl .rapid .sync_async
      - name: .standalone .noauth .nossl .latest .sync_async
    display_name: Storage InMemory Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      STORAGE_ENGINE: inmemory
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
  - name: storage-mmapv1-amazon2023-python3.9
    tasks:
      - name: .standalone .4.0 .noauth .nossl .sync_async
      - name: .replica_set .4.0 .noauth .nossl .sync_async
    display_name: Storage MMAPv1 Amazon2023 Python3.9
    run_on:
      - amazon2023-arm64-latest-large-m8g
    expansions:
      STORAGE_ENGINE: mmapv1
      PYTHON_BINARY: /opt/mongodbtoolchain/v4/bin/python3
